This document specifies the desired functions and specifications for the project.
Started: 10 June 2014

========================================================

Overall:
- Flexible, robust code to read, summarize, and regrid CMIP5 data.
- Basic summarized CMIP5 data included with package

========================================================

Input files:
- netCDF file(s) downloaded from CMIP5 repository
	+ deal with arbitrary file structures: list.files( ..., recursive=TRUE )

Main outputs of interest:
- Zonal (including global) total/means/sd
	+ annual
	+ monthly
	+ reported time step
- Gridded temporal mean/totals/sd
	+ annual
	+ monthly
	+ reported time step

Visualizations:			**BBL: necessary?
- Global map
- Zonal total/means

Formats:
- Probably want a simple data frame option for less-experienced users

Optional logging

========================================================

Internal data representation options:
- list(time, lon, lat, area, val, sd(?)) where val is a 3D array
	**KTB: I think this is the most straightforward
	**BBL: for each model/scenario/etc.?
	**BBL: sd? Based on what?
	
- data.frame(time, lat, lon, val)
	**BBL: possibly, esp. if we use dplyr package
	
- raster object
   **KTB: This has built in bilinear projection function that might be useful
   (though not an area-weighted projection which we would need for
   large grid shifts)

Support for/use of parallelization?
	- e.g. using 'parallel' package (R >2.14.0)
	- use dplyr? *Extremely* fast for data frames

Will need option to write out data to disk as we process, right? And
return a file handle to the user instead of actual data?
Data structures could get big with multiple models, scenarios, ensembles.

========================================================

Basic function tasks:
- List all downloaded files
	+ list available scenarios, experiments, models, time frames?
- Load specific experiment, model, ensemble, variable
	+ filter values based on absolute and/or relative tolerances
- Merge ensembles (mean, sd)
	+ e.g. historical and RCP
- Shift grid projection
	+ area weighted
	+ bilinear interpolation
- Shift units(?)   **BBL maybe yes, we have existing code for this
- Generate annual mean
- Generate zonal (including global) total/mean/sd
	+ I guess this counts as shifting grid projection
- Generate multi-year seasonal cycles
- Aggregate mean/total on a spatial mask
- Generate mean/sd/min/max across all specified models

========================================================

Edge/quirky cases to keep in mind:
- Data split across arbitrary number of files
- Monthly versus annual files
- Duplicate files


========================================================

Software:

	roxygen2 for documentation
	devtools to automate build and staging
	
	RStudio for package development?
	
	ncdf4 (what is difference between this and ncdf?)
	
	raster
	
Resources:

	https://support.rstudio.com/hc/en-us/articles/200486488-Developing-Packages-with-RStudio
	http://adv-r.had.co.nz/Package-basics.html
	http://adv-r.had.co.nz/Philosophy.html

One thing we might look at as a model (both good and not-good) is RNCEP package
	NCEP.aggregate(wx.data, YEARS = TRUE, MONTHS = TRUE, DAYS = TRUE, HOURS = TRUE, fxn = "%>0")

Think about a technical/note paper in Biogeosciences, PeerJ, PLOS ONE, etc.?
